

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Client &mdash; AutobahnPython 0.5.6 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="AutobahnPython 0.5.6 documentation" href="index.html" />
    <link rel="up" title="WebSocket" href="websockettoc.html" />
    <link rel="next" title="Server" href="websocketserver.html" />
    <link rel="prev" title="Base" href="websocketbase.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="websocketserver.html" title="Server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="websocketbase.html" title="Base"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">AutobahnPython 0.5.6 documentation</a> &raquo;</li>
          <li><a href="websockettoc.html" accesskey="U">WebSocket</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Client</a><ul>
<li><a class="reference internal" href="#factory">Factory</a></li>
<li><a class="reference internal" href="#protocol">Protocol</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="websocketbase.html"
                        title="previous chapter">Base</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="websocketserver.html"
                        title="next chapter">Server</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/websocketclient.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="client">
<h1>Client<a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h1>
<p>The classes <a class="reference internal" href="#autobahn.websocket.WebSocketClientProtocol" title="autobahn.websocket.WebSocketClientProtocol"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketClientProtocol</span></tt></a> and
<a class="reference internal" href="#autobahn.websocket.WebSocketClientFactory" title="autobahn.websocket.WebSocketClientFactory"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketClientFactory</span></tt></a> are the base classes
you derive from to implement WebSocket clients.</p>
<div class="section" id="factory">
<h2>Factory<a class="headerlink" href="#factory" title="Permalink to this headline">¶</a></h2>
<p>To create your actual client, you need a factory with the protocol attribute
set to your protocol.</p>
<p>You may either use <a class="reference internal" href="#autobahn.websocket.WebSocketClientFactory" title="autobahn.websocket.WebSocketClientFactory"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketClientFactory</span></tt></a> directly
and without modification or you can derive from that class when you want to
extend it&#8217;s behavior i.e. with state that is available for all client connections.</p>
<dl class="class">
<dt id="autobahn.websocket.WebSocketClientFactory">
<em class="property">class </em><tt class="descclassname">autobahn.websocket.</tt><tt class="descname">WebSocketClientFactory</tt><big>(</big><em>url=None</em>, <em>origin=None</em>, <em>protocols=</em><span class="optional">[</span><span class="optional">]</span>, <em>useragent='AutobahnPython/0.5.6'</em>, <em>debug=False</em>, <em>debugCodePaths=False</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>A Twisted factory for WebSockets client protocols.</p>
<dl class="attribute">
<dt id="autobahn.websocket.WebSocketClientFactory.protocol">
<tt class="descname">protocol</tt><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>The protocol to be spoken. Must be derived from <a class="reference internal" href="#autobahn.websocket.WebSocketClientProtocol" title="autobahn.websocket.WebSocketClientProtocol"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketClientProtocol</span></tt></a>.</p>
<p>alias of <tt class="xref py py-class docutils literal"><span class="pre">WebSocketClientProtocol</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.__init__">
<tt class="descname">__init__</tt><big>(</big><em>url=None</em>, <em>origin=None</em>, <em>protocols=</em><span class="optional">[</span><span class="optional">]</span>, <em>useragent='AutobahnPython/0.5.6'</em>, <em>debug=False</em>, <em>debugCodePaths=False</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create instance of WebSocket client factory.</p>
<p>Note that you MUST set URL either here or using setSessionParameters() _before_ the factory is started.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> (<em>str</em>) &#8211; WebSocket URL to connect to - (&#8220;ws:&#8221; | &#8220;wss:&#8221;) &#8220;//&#8221; host [ &#8221;:&#8221; port ] path [ &#8221;?&#8221; query ].</li>
<li><strong>origin</strong> (<em>str</em>) &#8211; The origin to be sent in WebSockets opening handshake or None (default: None).</li>
<li><strong>protocols</strong> (<em>list of strings</em>) &#8211; List of subprotocols the client should announce in WebSockets opening handshake (default: []).</li>
<li><strong>useragent</strong> (<em>str</em>) &#8211; User agent as announced in HTTP request header or None (default: &#8220;AutobahnWebSockets/x.x.x&#8221;).</li>
<li><strong>debug</strong> (<em>bool</em>) &#8211; Debug mode (default: False).</li>
<li><strong>debugCodePaths</strong> (<em>bool</em>) &#8211; Debug code paths mode (default: False).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.setSessionParameters">
<tt class="descname">setSessionParameters</tt><big>(</big><em>url=None</em>, <em>origin=None</em>, <em>protocols=</em><span class="optional">[</span><span class="optional">]</span>, <em>useragent=None</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.setSessionParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set WebSocket session parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> (<em>str</em>) &#8211; WebSocket URL to connect to - (&#8220;ws:&#8221; | &#8220;wss:&#8221;) &#8220;//&#8221; host [ &#8221;:&#8221; port ] path [ &#8221;?&#8221; query ].</li>
<li><strong>origin</strong> (<em>str</em>) &#8211; The origin to be sent in opening handshake.</li>
<li><strong>protocols</strong> (<em>list of strings</em>) &#8211; List of WebSocket subprotocols the client should announce in opening handshake.</li>
<li><strong>useragent</strong> (<em>str</em>) &#8211; User agent as announced in HTTP request header during opening handshake.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.setProtocolOptions">
<tt class="descname">setProtocolOptions</tt><big>(</big><em>version=None</em>, <em>allowHixie76=None</em>, <em>utf8validateIncoming=None</em>, <em>acceptMaskedServerFrames=None</em>, <em>maskClientFrames=None</em>, <em>applyMask=None</em>, <em>maxFramePayloadSize=None</em>, <em>maxMessagePayloadSize=None</em>, <em>autoFragmentSize=None</em>, <em>failByDrop=None</em>, <em>echoCloseCodeReason=None</em>, <em>serverConnectionDropTimeout=None</em>, <em>openHandshakeTimeout=None</em>, <em>closeHandshakeTimeout=None</em>, <em>tcpNoDelay=None</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.setProtocolOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Set WebSocket protocol options used as defaults for _new_ protocol instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>version</strong> (<em>int</em>) &#8211; The WebSockets protocol spec (draft) version to be used (default: WebSocketProtocol.DEFAULT_SPEC_VERSION).</li>
<li><strong>allowHixie76</strong> (<em>bool</em>) &#8211; Allow to speak Hixie76 protocol version.</li>
<li><strong>utf8validateIncoming</strong> (<em>bool</em>) &#8211; Validate incoming UTF-8 in text message payloads (default: True).</li>
<li><strong>acceptMaskedServerFrames</strong> (<em>bool</em>) &#8211; Accept masked server-to-client frames (default: False).</li>
<li><strong>maskClientFrames</strong> (<em>bool</em>) &#8211; Mask client-to-server frames (default: True).</li>
<li><strong>applyMask</strong> (<em>bool</em>) &#8211; Actually apply mask to payload when mask it present. Applies for outgoing and incoming frames (default: True).</li>
<li><strong>maxFramePayloadSize</strong> (<em>int</em>) &#8211; Maximum frame payload size that will be accepted when receiving or 0 for unlimited (default: 0).</li>
<li><strong>maxMessagePayloadSize</strong> (<em>int</em>) &#8211; Maximum message payload size (after reassembly of fragmented messages) that will be accepted when receiving or 0 for unlimited (default: 0).</li>
<li><strong>autoFragmentSize</strong> (<em>int</em>) &#8211; Automatic fragmentation of outgoing data messages (when using the message-based API) into frames with payload length &lt;= this size or 0 for no auto-fragmentation (default: 0).</li>
<li><strong>failByDrop</strong> &#8211; Fail connections by dropping the TCP connection without performing closing handshake (default: True).</li>
<li><strong>echoCloseCodeReason</strong> (<em>bool</em>) &#8211; Iff true, when receiving a close, echo back close code/reason. Otherwise reply with code == NORMAL, reason = &#8220;&#8221; (default: False).</li>
<li><strong>serverConnectionDropTimeout</strong> (<em>float</em>) &#8211; When the client expects the server to drop the TCP, timeout in seconds (default: 1).</li>
<li><strong>openHandshakeTimeout</strong> (<em>float</em>) &#8211; Opening WebSocket handshake timeout, timeout in seconds or 0 to deactivate (default: 0).</li>
<li><strong>closeHandshakeTimeout</strong> (<em>float</em>) &#8211; When we expect to receive a closing handshake reply, timeout in seconds (default: 1).</li>
<li><strong>tcpNoDelay</strong> (<em>bool</em>) &#8211; TCP NODELAY (&#8220;Nagle&#8221;) socket option (default: True).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.resetProtocolOptions">
<tt class="descname">resetProtocolOptions</tt><big>(</big><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.resetProtocolOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all WebSocket protocol options to defaults.</p>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.clientConnectionFailed">
<tt class="descname">clientConnectionFailed</tt><big>(</big><em>connector</em>, <em>reason</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.clientConnectionFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Twisted when the connection to server has failed. Default implementation
does nothing. Override in derived class when appropriate.</p>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientFactory.clientConnectionLost">
<tt class="descname">clientConnectionLost</tt><big>(</big><em>connector</em>, <em>reason</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientFactory.clientConnectionLost" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Twisted when the connection to server was lost. Default implementation
does nothing. Override in derived class when appropriate.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="protocol">
<h2>Protocol<a class="headerlink" href="#protocol" title="Permalink to this headline">¶</a></h2>
<p>Usually, you implement your WebSocket client by creating a protocol that
derives from <a class="reference internal" href="#autobahn.websocket.WebSocketClientProtocol" title="autobahn.websocket.WebSocketClientProtocol"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketClientProtocol</span></tt></a>.</p>
<p>This class in turn derives from <a class="reference internal" href="websocketbase.html#autobahn.websocket.WebSocketProtocol" title="autobahn.websocket.WebSocketProtocol"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.WebSocketProtocol</span></tt></a>,
which is where you find all the callbacks and methods.</p>
<dl class="class">
<dt id="autobahn.websocket.WebSocketClientProtocol">
<em class="property">class </em><tt class="descclassname">autobahn.websocket.</tt><tt class="descname">WebSocketClientProtocol</tt><a class="headerlink" href="#autobahn.websocket.WebSocketClientProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Client protocol for WebSockets.</p>
<dl class="method">
<dt id="autobahn.websocket.WebSocketClientProtocol.onConnect">
<tt class="descname">onConnect</tt><big>(</big><em>connectionResponse</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientProtocol.onConnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback fired directly after WebSocket opening handshake when new WebSocket server
connection was established.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>connectionResponse</strong> (instance of <a class="reference internal" href="websocketaux.html#autobahn.websocket.ConnectionResponse" title="autobahn.websocket.ConnectionResponse"><tt class="xref py py-class docutils literal"><span class="pre">autobahn.websocket.ConnectionResponse</span></tt></a>) &#8211; WebSocket connection response information.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientProtocol.connectionMade">
<tt class="descname">connectionMade</tt><big>(</big><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientProtocol.connectionMade" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Twisted when new TCP connection to server was established. Default
implementation will start the initial WebSocket opening handshake.
When overriding in derived class, make sure to call this base class
implementation _before_ your code.</p>
</dd></dl>

<dl class="method">
<dt id="autobahn.websocket.WebSocketClientProtocol.connectionLost">
<tt class="descname">connectionLost</tt><big>(</big><em>reason</em><big>)</big><a class="headerlink" href="#autobahn.websocket.WebSocketClientProtocol.connectionLost" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by Twisted when established TCP connection to server was lost. Default
implementation will tear down all state properly.
When overriding in derived class, make sure to call this base class
implementation _after_ your code.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="websocketserver.html" title="Server"
             >next</a> |</li>
        <li class="right" >
          <a href="websocketbase.html" title="Base"
             >previous</a> |</li>
        <li><a href="index.html">AutobahnPython 0.5.6 documentation</a> &raquo;</li>
          <li><a href="websockettoc.html" >WebSocket</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011,2012 Tavendo GmbH.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>